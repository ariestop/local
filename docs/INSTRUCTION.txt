Инструкция по развёртыванию проекта на macOS (через GitHub)

1) Установите инструменты

Рекомендуется через Homebrew:

/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
brew update
brew install git php composer mysql

Проверьте:
git --version
php -v
composer --version
mysql --version


2) Клонируйте репозиторий

git clone https://github.com/ariestop/local.git
cd local
git pull


3) Установите PHP-зависимости

composer install
# если composer не установлен глобально:
php composer.phar install


4) Запустите MySQL

brew services start mysql

Проверка:
mysql -u root -e "SELECT VERSION();"

Если у root есть пароль, используйте:
mysql -u root -p -e "SELECT VERSION();"


5) Настройте .env

Скопируйте шаблон:
cp .env.example .env

Проверьте/заполните в .env:
- APP_ENV=dev
- DB_HOST=127.0.0.1
- DB_NAME=infosee2_m2sar
- DB_USER=root
- DB_PASSWORD= (или ваш пароль)
- APP_URL=http://localhost:8000
- APP_USE_FRONT_CONTROLLER_URLS=0

Если сервер без mod_rewrite, установите:
- APP_USE_FRONT_CONTROLLER_URLS=1

Важно:
Если задаёте SECURITY_CSP вручную, значение должно быть в двойных кавычках.


6) Инициализируйте БД и примените миграции

php install.php

Примечание:
- первый запуск выполняет bootstrap (создание БД + импорт baseline-дампа + миграции);
- последующие запуски применяют только новые миграции из папки migrations.


7) Запустите проект

php -S localhost:8000 -t public_html

Откройте в браузере:
http://localhost:8000


8) Обновление проекта в будущем

git pull
composer install
# или, если глобального composer нет:
php composer.phar install
php install.php
